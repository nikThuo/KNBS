<!DOCTYPE html>
<html lang="en">
<head>

    <!-- Title -->
    <title>NHIF Resources | Edit</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <meta charset="UTF-8">
    <meta name="description" content="Responsive Admin Dashboard Template"/>
    <meta name="keywords" content="admin,dashboard"/>
    <meta name="author" content="Ron"/>

    {% load staticfiles %}

    <!-- Styles -->
    <link type="text/css" rel="stylesheet"
          href="{% static 'knbs_bi/assets/plugins/materialize/css/materialize.min.css' %}"/>
    <link href="{% static 'knbs_bi/assets/css/material.css' %}" rel="stylesheet">
    <link href="{% static 'knbs_bi/assets/plugins/material-preloader/css/materialPreloader.min.css' %}"
          rel="stylesheet">

    <!-- Theme Styles -->
    <link href="{% static 'knbs_bi/assets/css/alpha.min.css' %}" rel="stylesheet" type="text/css"/>
    <link href="{% static 'knbs_bi/assets/css/custom.css' %}" rel="stylesheet" type="text/css"/>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="http://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="http://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->

{#    <script>#}
{#            function getbirths() {#}
{#                var births = JSON.parse(localStorage.getItem("reg_births"));#}
{#                {% if reg_births %}#}
{#                    {% for load in reg_births %}#}
{#                        var birth_id = {{ load.birth_id }};#}
{#                        var county = {{ load.county }};#}
{#                        var year = {{ load.year }};#}
{#                        var facility = {{ load.health_facility }}#}
{#                        var home = {{ load.home }}#}
{#                    {% endfor %}#}
{#                {% endif%}#}
{#            console.log(birth_id)#}
{#            }#}
{##}
{#    </script>#}

    <script>
{#        window.onload = function () {#}
{#            alert("done");#}
{#            console.log("Waiting");#}
{#        };#}
{#        function getBirths() {#}
{#           var facility = localStorage.getItem("facility");#}
{#           //$('#health_facility').val('facility');#}
{#           console.log(facility);#}
{#           document.getElementById('health_facility').value = facility;#}
{#           console.log("Waiting");#}
{##}
{#        }#}
{#        $ (function () {#}
{#            var facility = localStorage.getItem("facility");#}
{#           //$('#health_facility').val('facility');#}
{#           console.log(facility);#}
{#           document.getElementById('health_facility').value = facility;#}
{#           console.log("Waiting");#}
{#        });#}
{#        window.onload = getBirths;#}
{##}
{#        document.bind('pageinit', function () {#}
{#            var facility = localStorage.getItem("facility");#}
{#           //$('#health_facility').val('facility');#}
{#           console.log(facility);#}
{#           document.getElementById('health_facility').value = facility;#}
{#           console.log("Waiting");#}
{#        });#}
{##}
{#        $(window).load(function () {#}
{#            var facility = localStorage.getItem("facility");#}
{#           //$('#health_facility').val('facility');#}
{#           console.log(facility);#}
{#           document.getElementById('health_facility').value = facility;#}
{#           console.log("Waiting");#}
{#        });#}
{##}
{#        document.addEventListener('DOMContentLoaded', function() {#}
{#            var facility = localStorage.getItem("facility");#}
{#           //$('#health_facility').val('facility');#}
{#           console.log(facility);#}
{#           document.getElementById('health_facility').value = facility;#}
{#           console.log("Waiting");#}
{#            //alert("Ready!");#}
{#        }, false);#}

    </script>


</head>
<body >
<div class="loader-bg"></div>
<div class="loader">
    <div class="preloader-wrapper big active">
        <div class="spinner-layer spinner-blue">
            <div class="circle-clipper left">
                <div class="circle"></div>
            </div>
            <div class="gap-patch">
                <div class="circle"></div>
            </div>
            <div class="circle-clipper right">
                <div class="circle"></div>
            </div>
        </div>
        <div class="spinner-layer spinner-spinner-teal lighten-1">
            <div class="circle-clipper left">
                <div class="circle"></div>
            </div>
            <div class="gap-patch">
                <div class="circle"></div>
            </div>
            <div class="circle-clipper right">
                <div class="circle"></div>
            </div>
        </div>
        <div class="spinner-layer spinner-yellow">
            <div class="circle-clipper left">
                <div class="circle"></div>
            </div>
            <div class="gap-patch">
                <div class="circle"></div>
            </div>
            <div class="circle-clipper right">
                <div class="circle"></div>
            </div>
        </div>
        <div class="spinner-layer spinner-green">
            <div class="circle-clipper left">
                <div class="circle"></div>
            </div>
            <div class="gap-patch">
                <div class="circle"></div>
            </div>
            <div class="circle-clipper right">
                <div class="circle"></div>
            </div>
        </div>
    </div>
</div>
<div class="mn-content fixed-sidebar">

    {% include 'knbs_bi/side_menu.html' %}
    <main class="mn-inner">
        <div class="row">
            <div class="col s12">
                <div class="page-title">Registered Births and Occurrences</div>
            </div>
            <div class="col s12 m12 l12">
                <div class="card">
                    <div class="card-content">
                        <span class="card-title">Registered Births and Occurrences Edit</span><br>
                        <a href="/registered_births/" class="btn maroon waves-effect waves-light ">
                            <i class="material-icons right">arrow_left</i>
                            Back
                        </a>
                        <div class="row">
                            <form action="" method="POST" class="col s12">

                                <div class="row">
                                    <div class="input-field col m6 s12">
                                        <select name="year" id="year">
                                            <option value="">Year...</option>
                                            {% for i in 1990|range:2031 %}
                                                <option value={{ i }}>{{ i }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="input-field col s12 m6 l4">
                                        <input class="validate" id="county" name="county" type="text" value="" required>
                                        <label for="benefits">*County</label>
                                    </div>
                                    <div class="input-field col s12 m6 l4">
                                        <input class="validate" id="health_facility" name="health_facility" type="text"
                                               value="" required>
                                        <label for="contributions_net_benefits">*Health Facility </label>
                                    </div>
                                    <div class="input-field col s12 m6 l4">
                                        <input class="validate" id="home" name="home" type="text" value="" required>
                                        <label for="receipts">*Home </label>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col s4">
                                        <button class="btn maroon waves-effect waves-light " type="button" onclick="editBirths()" name="submit">Update
                                            <i class="material-icons right">send</i>
                                        </button>
                                    </div>
                                </div>
{#                                <script>#}
{#                                   function getBirths() {#}
{#                                       var facility = localStorage.getItem("facility");#}
{#                                       //$('#health_facility').val('facility');#}
{#                                       console.log(facility);#}
{#                                       document.getElementById('health_facility').value = facility;#}
{#                                       console.log("Waiting");#}
{#                                   }#}
{#                                   window.onload = getBirths;#}
{#                                </script>#}
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
</div>
<div class="left-sidebar-hover"></div>

<!-- Javascripts -->
<script src="{% static 'knbs_bi/assets/plugins/jquery/jquery-2.2.0.min.js' %}"></script>
<script src="{% static 'knbs_bi/assets/plugins/materialize/js/materialize.min.js' %}"></script>
<script src="{% static 'knbs_bi/assets/plugins/material-preloader/js/materialPreloader.min.js' %}"></script>
<script src="{% static 'knbs_bi/assets/plugins/jquery-blockui/jquery.blockui.js' %}"></script>
<script src="{% static 'knbs_bi/assets/plugins/datatables/js/jquery.dataTables.min.js' %}"></script>
<script src="{% static 'knbs_bi/assets/js/alpha.min.js' %}"></script>
<script src="{% static 'knbs_bi/assets/js/pages/table-data.js' %}"></script>
<script src="{% static 'knbs_bi/assets/js/pages/form_elements.js' %}"></script>

{#<script type="text/javascript">#}
{##}
{#    $('#county').val('5');#}
{#    /*#}
{#     $('input.validate').keyup(function(event) {#}
{##}
{#     // skip for arrow keys#}
{#     if(event.which >= 37 && event.which <= 40) return;#}
{##}
{#     // format number#}
{#     $(this).val(function(index, value) {#}
{#     return value#}
{#     .replace(/\D/g, "")#}
{#     .replace(/\B(?=(\d{3})+(?!\d))/g, ",")#}
{#     ;#}
{#     });#}
{#     });#}
{#     */#}
{#</script>#}

{#<?php if(isset($msg)){?>#}
{#<script>#}
{#    $(document).ready(function () {#}
{#        Materialize.toast("<?php echo $msg; ?>", 4000)#}
{#    });#}
{#</script>#}
{#<?php } ?>#}
{#<script type="text/javascript">#}
{#    window.onload = function () {#}
{#            alert("done");#}
{#            var facility = localStorage.getItem("facility");#}
{#            $('#health_facility').val('facility');#}
{#            console.log(facility);#}
{#            //document.getElementById('health_facility').value = facility;#}
{#            console.log("Waiting");#}
{#        };#}
{#</script>#}
<script>
    $ (function () {
            var id = localStorage.getItem("id");
            console.log(id);
            $('#year').val(localStorage.getItem("year"));
            $('#county').val(localStorage.getItem("county"));
            $('#health_facility').val(localStorage.getItem("facility"));
            $('#home').val(localStorage.getItem("home"));
           //console.log(facility);
           //document.getElementById('health_facility').value = facility;
           //console.log("Waiting");
        });

    function editBirths(){
        var settings = {
          "async": true,
          "crossDomain": true,
          "url": "http://localhost:8080/health/updatebirths",
          "method": "POST",
          "headers": {
            "content-type": "application/x-www-form-urlencoded",
            "cache-control": "no-cache",
          },
          "data": {
            "birth": localStorage.getItem("id"),
            "county": $('#county').val(),
            "year": $('#year').val(),
            "facility": $('#health_facility').val(),
            "home": $('#home').val()
        }
}

$.ajax(settings).done(function (response) {
  console.log(response);
});
    }
</script>

</body>
</html>